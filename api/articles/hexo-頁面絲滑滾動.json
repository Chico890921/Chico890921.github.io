{"title":"hexo::頁面絲滑滾動","uid":"622b3593042700329fa56bf6ad7dfcba","slug":"hexo-頁面絲滑滾動","date":"2022-01-19T10:57:45.000Z","updated":"2022-09-20T08:45:26.982Z","comments":true,"path":"api/articles/hexo-頁面絲滑滾動.json","keywords":null,"cover":"https://i.imgur.com/WdmJdEm.jpg","content":"<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css\">\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>此篇為各筆記之整理，非原創內容，資料來源可見下方連結與文後參考資料</p></blockquote>\n<h2 id=\"步驟\"><a href=\"#步驟\" class=\"headerlink\" title=\"步驟\"></a>步驟</h2><ol>\n<li>在 <code>[Blogroot]\\themes\\xxxxxx\\source\\js</code>創建新檔<code>smooth.js</code><br> 添加以下程式碼<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;<span class=\"keyword\">function</span> <span class=\"title function_\">_typeof</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span>(_typeof=<span class=\"string\">&quot;function&quot;</span>==<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span>&amp;&amp;<span class=\"string\">&quot;symbol&quot;</span>==<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span>.<span class=\"property\">iterator</span>?<span class=\"keyword\">function</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> e&#125;:<span class=\"keyword\">function</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span> e&amp;&amp;<span class=\"string\">&quot;function&quot;</span>==<span class=\"keyword\">typeof</span> <span class=\"title class_\">Symbol</span>&amp;&amp;e.<span class=\"property\">constructor</span>===<span class=\"title class_\">Symbol</span>&amp;&amp;e!==<span class=\"title class_\">Symbol</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>?<span class=\"string\">&quot;symbol&quot;</span>:<span class=\"keyword\">typeof</span> e&#125;)(e)&#125;!<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">function</span> <span class=\"title function_\">r</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">var</span> e,t,o,n,r,i;!D&amp;&amp;<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>&amp;&amp;(D=!<span class=\"number\">0</span>,e=<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>,t=<span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>,o=<span class=\"variable language_\">window</span>.<span class=\"property\">innerHeight</span>,n=e.<span class=\"property\">scrollHeight</span>,M=<span class=\"number\">0</span>&lt;=<span class=\"variable language_\">document</span>.<span class=\"property\">compatMode</span>.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&quot;CSS&quot;</span>)?<span class=\"attr\">t</span>:e,p=e,x.<span class=\"property\">keyboardSupport</span>&amp;&amp;<span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;keydown&quot;</span>,a,!<span class=\"number\">1</span>),top!=self?E=!<span class=\"number\">0</span>:I&amp;&amp;o&lt;n&amp;&amp;(e.<span class=\"property\">offsetHeight</span>&lt;=o||t.<span class=\"property\">offsetHeight</span>&lt;=o)&amp;&amp;((r=<span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;div&quot;</span>)).<span class=\"property\">style</span>.<span class=\"property\">cssText</span>=<span class=\"string\">&quot;position:absolute; z-index:-10000; top:0; left:0; right:0; height:&quot;</span>+M.<span class=\"property\">scrollHeight</span>+<span class=\"string\">&quot;px&quot;</span>,<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(r),v=<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;i=i||<span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;r.<span class=\"property\">style</span>.<span class=\"property\">height</span>=<span class=\"string\">&quot;0&quot;</span>,r.<span class=\"property\">style</span>.<span class=\"property\">height</span>=M.<span class=\"property\">scrollHeight</span>+<span class=\"string\">&quot;px&quot;</span>,i=<span class=\"literal\">null</span>&#125;,<span class=\"number\">500</span>)&#125;,<span class=\"built_in\">setTimeout</span>(v,<span class=\"number\">10</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;resize&quot;</span>,v,!<span class=\"number\">1</span>),(y=<span class=\"keyword\">new</span> $(v)).<span class=\"title function_\">observe</span>(e,&#123;<span class=\"attr\">attributes</span>:!<span class=\"number\">0</span>,<span class=\"attr\">childList</span>:!<span class=\"number\">0</span>,<span class=\"attr\">characterData</span>:!<span class=\"number\">1</span>&#125;),M.<span class=\"property\">offsetHeight</span>&lt;=o&amp;&amp;((o=<span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;div&quot;</span>)).<span class=\"property\">style</span>.<span class=\"property\">clear</span>=<span class=\"string\">&quot;both&quot;</span>,e.<span class=\"title function_\">appendChild</span>(o))),x.<span class=\"property\">fixedBackground</span>||(e.<span class=\"property\">style</span>.<span class=\"property\">backgroundAttachment</span>=<span class=\"string\">&quot;scroll&quot;</span>,t.<span class=\"property\">style</span>.<span class=\"property\">backgroundAttachment</span>=<span class=\"string\">&quot;scroll&quot;</span>))&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">l</span>(<span class=\"params\">s,d,u</span>)&#123;<span class=\"keyword\">var</span> e,t,m,o,n;e=<span class=\"number\">0</span>&lt;(e=d)?<span class=\"number\">1</span>:-<span class=\"number\">1</span>,t=<span class=\"number\">0</span>&lt;(t=u)?<span class=\"number\">1</span>:-<span class=\"number\">1</span>,k.<span class=\"property\">x</span>===e&amp;&amp;k.<span class=\"property\">y</span>===t||(k.<span class=\"property\">x</span>=e,k.<span class=\"property\">y</span>=t,C=[],O=<span class=\"number\">0</span>),<span class=\"number\">1</span>!=x.<span class=\"property\">accelerationMax</span>&amp;&amp;((o=<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>()-O)&lt;x.<span class=\"property\">accelerationDelta</span>&amp;&amp;(<span class=\"number\">1</span>&lt;(o=(<span class=\"number\">1</span>+<span class=\"number\">50</span>/o)/<span class=\"number\">2</span>)&amp;&amp;(o=<span class=\"title class_\">Math</span>.<span class=\"title function_\">min</span>(o,x.<span class=\"property\">accelerationMax</span>),d*=o,u*=o)),O=<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>()),C.<span class=\"title function_\">push</span>(&#123;<span class=\"attr\">x</span>:d,<span class=\"attr\">y</span>:u,<span class=\"attr\">lastX</span>:d&lt;<span class=\"number\">0</span>?<span class=\"number\">.99</span>:-<span class=\"number\">.99</span>,<span class=\"attr\">lastY</span>:u&lt;<span class=\"number\">0</span>?<span class=\"number\">.99</span>:-<span class=\"number\">.99</span>,<span class=\"attr\">start</span>:<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>()&#125;),z||(o=<span class=\"title function_\">j</span>(),m=s===o||s===<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>,<span class=\"literal\">null</span>==s.<span class=\"property\">$scrollBehavior</span>&amp;&amp;(n=<span class=\"title function_\">X</span>(o=s),<span class=\"literal\">null</span>==N[n]&amp;&amp;(o=<span class=\"title function_\">getComputedStyle</span>(o,<span class=\"string\">&quot;&quot;</span>)[<span class=\"string\">&quot;scroll-behavior&quot;</span>],N[n]=<span class=\"string\">&quot;smooth&quot;</span>==o),N[n])&amp;&amp;(s.<span class=\"property\">$scrollBehavior</span>=s.<span class=\"property\">style</span>.<span class=\"property\">scrollBehavior</span>,s.<span class=\"property\">style</span>.<span class=\"property\">scrollBehavior</span>=<span class=\"string\">&quot;auto&quot;</span>),n=<span class=\"keyword\">function</span> <span class=\"title function_\">e</span>(<span class=\"params\">t</span>)&#123;t=<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>();<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> o=<span class=\"number\">0</span>,n=<span class=\"number\">0</span>,r=<span class=\"number\">0</span>;r&lt;C.<span class=\"property\">length</span>;r++)&#123;<span class=\"keyword\">var</span> i=C[r],l=t-i.<span class=\"property\">start</span>,a=l&gt;=x.<span class=\"property\">animationTime</span>,c=a?<span class=\"number\">1</span>:l/x.<span class=\"property\">animationTime</span>;x.<span class=\"property\">pulseAlgorithm</span>&amp;&amp;(c=<span class=\"number\">1</span>&lt;=(l=c)?<span class=\"number\">1</span>:l&lt;=<span class=\"number\">0</span>?<span class=\"number\">0</span>:(<span class=\"number\">1</span>==x.<span class=\"property\">pulseNormalize</span>&amp;&amp;(x.<span class=\"property\">pulseNormalize</span>/=<span class=\"title function_\">h</span>(<span class=\"number\">1</span>)),<span class=\"title function_\">h</span>(l))),o+=l=i.<span class=\"property\">x</span>*c-i.<span class=\"property\">lastX</span>&gt;&gt;<span class=\"number\">0</span>,n+=c=i.<span class=\"property\">y</span>*c-i.<span class=\"property\">lastY</span>&gt;&gt;<span class=\"number\">0</span>,i.<span class=\"property\">lastX</span>+=l,i.<span class=\"property\">lastY</span>+=c,a&amp;&amp;(C.<span class=\"title function_\">splice</span>(r,<span class=\"number\">1</span>),r--)&#125;m?<span class=\"variable language_\">window</span>.<span class=\"title function_\">scrollBy</span>(o,n):(o&amp;&amp;(s.<span class=\"property\">scrollLeft</span>+=o),n&amp;&amp;(s.<span class=\"property\">scrollTop</span>+=n)),d||u||(C=[]),C.<span class=\"property\">length</span>?<span class=\"title function_\">P</span>(e,s,<span class=\"number\">1e3</span>/x.<span class=\"property\">frameRate</span>+<span class=\"number\">1</span>):(z=!<span class=\"number\">1</span>,<span class=\"literal\">null</span>!=s.<span class=\"property\">$scrollBehavior</span>&amp;&amp;(s.<span class=\"property\">style</span>.<span class=\"property\">scrollBehavior</span>=s.<span class=\"property\">$scrollBehavior</span>,s.<span class=\"property\">$scrollBehavior</span>=<span class=\"literal\">null</span>))&#125;,<span class=\"title function_\">P</span>(n,s,<span class=\"number\">0</span>),z=!<span class=\"number\">0</span>)&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">e</span>(<span class=\"params\">e</span>)&#123;D||<span class=\"title function_\">r</span>();<span class=\"keyword\">var</span> t=e.<span class=\"property\">target</span>;<span class=\"keyword\">if</span>(e.<span class=\"property\">defaultPrevented</span>||e.<span class=\"property\">ctrlKey</span>||<span class=\"title function_\">m</span>(p,<span class=\"string\">&quot;embed&quot;</span>)||<span class=\"title function_\">m</span>(t,<span class=\"string\">&quot;embed&quot;</span>)&amp;&amp;<span class=\"regexp\">/\\.pdf/i</span>.<span class=\"title function_\">test</span>(t.<span class=\"property\">src</span>)||<span class=\"title function_\">m</span>(p,<span class=\"string\">&quot;object&quot;</span>)||t.<span class=\"property\">shadowRoot</span>)<span class=\"keyword\">return</span>!<span class=\"number\">0</span>;<span class=\"keyword\">var</span> o=-e.<span class=\"property\">wheelDeltaX</span>||e.<span class=\"property\">deltaX</span>||<span class=\"number\">0</span>,n=-e.<span class=\"property\">wheelDeltaY</span>||e.<span class=\"property\">deltaY</span>||<span class=\"number\">0</span>;<span class=\"keyword\">return</span> T&amp;&amp;(e.<span class=\"property\">wheelDeltaX</span>&amp;&amp;<span class=\"title function_\">w</span>(e.<span class=\"property\">wheelDeltaX</span>,<span class=\"number\">120</span>)&amp;&amp;(o=e.<span class=\"property\">wheelDeltaX</span>/<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(e.<span class=\"property\">wheelDeltaX</span>)*-<span class=\"number\">120</span>),e.<span class=\"property\">wheelDeltaY</span>&amp;&amp;<span class=\"title function_\">w</span>(e.<span class=\"property\">wheelDeltaY</span>,<span class=\"number\">120</span>)&amp;&amp;(n=e.<span class=\"property\">wheelDeltaY</span>/<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(e.<span class=\"property\">wheelDeltaY</span>)*-<span class=\"number\">120</span>)),o||n||(n=-e.<span class=\"property\">wheelDelta</span>||<span class=\"number\">0</span>),<span class=\"number\">1</span>===e.<span class=\"property\">deltaMode</span>&amp;&amp;(o*=<span class=\"number\">40</span>,n*=<span class=\"number\">40</span>),(t=<span class=\"title function_\">s</span>(t))?!!<span class=\"keyword\">function</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">if</span>(e)<span class=\"keyword\">return</span> L.<span class=\"property\">length</span>||(L=[e,e,e]),e=<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(e),L.<span class=\"title function_\">push</span>(e),L.<span class=\"title function_\">shift</span>(),<span class=\"built_in\">clearTimeout</span>(b),b=<span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">try</span>&#123;<span class=\"variable language_\">localStorage</span>.<span class=\"property\">SS_deltaBuffer</span>=L.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>)&#125;<span class=\"keyword\">catch</span>(e)&#123;&#125;&#125;,<span class=\"number\">1e3</span>),e=<span class=\"number\">120</span>&lt;e&amp;&amp;<span class=\"title function_\">f</span>(e),!<span class=\"title function_\">f</span>(<span class=\"number\">120</span>)&amp;&amp;!<span class=\"title function_\">f</span>(<span class=\"number\">100</span>)&amp;&amp;!e&#125;(n)||(<span class=\"number\">1.2</span>&lt;<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(o)&amp;&amp;(o*=x.<span class=\"property\">stepSize</span>/<span class=\"number\">120</span>),<span class=\"number\">1.2</span>&lt;<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(n)&amp;&amp;(n*=x.<span class=\"property\">stepSize</span>/<span class=\"number\">120</span>),<span class=\"title function_\">l</span>(t,o,n),e.<span class=\"title function_\">preventDefault</span>(),<span class=\"keyword\">void</span> <span class=\"title function_\">c</span>()):!E||!q||(<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(e,<span class=\"string\">&quot;target&quot;</span>,&#123;<span class=\"attr\">value</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">frameElement</span>&#125;),parent.<span class=\"title function_\">wheel</span>(e))&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">a</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">var</span> t=e.<span class=\"property\">target</span>,o=e.<span class=\"property\">ctrlKey</span>||e.<span class=\"property\">altKey</span>||e.<span class=\"property\">metaKey</span>||e.<span class=\"property\">shiftKey</span>&amp;&amp;e.<span class=\"property\">keyCode</span>!==B.<span class=\"property\">spacebar</span>;<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">contains</span>(p)||(p=<span class=\"variable language_\">document</span>.<span class=\"property\">activeElement</span>);<span class=\"keyword\">var</span> n=<span class=\"regexp\">/^(textarea|select|embed|object)$/i</span>,r=<span class=\"regexp\">/^(button|submit|radio|checkbox|file|color|image)$/i</span>;<span class=\"keyword\">if</span>(!(n=e.<span class=\"property\">defaultPrevented</span>||n.<span class=\"title function_\">test</span>(t.<span class=\"property\">nodeName</span>)||<span class=\"title function_\">m</span>(t,<span class=\"string\">&quot;input&quot;</span>)&amp;&amp;!r.<span class=\"title function_\">test</span>(t.<span class=\"property\">type</span>)||<span class=\"title function_\">m</span>(p,<span class=\"string\">&quot;video&quot;</span>)))&#123;n=e.<span class=\"property\">target</span>;<span class=\"keyword\">var</span> i=!<span class=\"number\">1</span>;<span class=\"keyword\">if</span>(-<span class=\"number\">1</span>!=<span class=\"variable language_\">document</span>.<span class=\"property\">URL</span>.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&quot;www.youtube.com/watch&quot;</span>))<span class=\"keyword\">do</span>&#123;<span class=\"keyword\">if</span>(i=n.<span class=\"property\">classList</span>&amp;&amp;n.<span class=\"property\">classList</span>.<span class=\"title function_\">contains</span>(<span class=\"string\">&quot;html5-video-controls&quot;</span>))<span class=\"keyword\">break</span>&#125;<span class=\"keyword\">while</span>(n=n.<span class=\"property\">parentNode</span>);n=i&#125;<span class=\"keyword\">if</span>(n||t.<span class=\"property\">isContentEditable</span>||o||(<span class=\"title function_\">m</span>(t,<span class=\"string\">&quot;button&quot;</span>)||<span class=\"title function_\">m</span>(t,<span class=\"string\">&quot;input&quot;</span>)&amp;&amp;r.<span class=\"title function_\">test</span>(t.<span class=\"property\">type</span>))&amp;&amp;e.<span class=\"property\">keyCode</span>===B.<span class=\"property\">spacebar</span>||<span class=\"title function_\">m</span>(t,<span class=\"string\">&quot;input&quot;</span>)&amp;&amp;<span class=\"string\">&quot;radio&quot;</span>==t.<span class=\"property\">type</span>&amp;&amp;H[e.<span class=\"property\">keyCode</span>])<span class=\"keyword\">return</span>!<span class=\"number\">0</span>;<span class=\"keyword\">if</span>(n=t=<span class=\"number\">0</span>,!(o=<span class=\"title function_\">s</span>(p)))<span class=\"keyword\">return</span>!E||!q||parent.<span class=\"title function_\">keydown</span>(e);<span class=\"keyword\">switch</span>(r=o.<span class=\"property\">clientHeight</span>,o==<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>&amp;&amp;(r=<span class=\"variable language_\">window</span>.<span class=\"property\">innerHeight</span>),e.<span class=\"property\">keyCode</span>)&#123;<span class=\"keyword\">case</span> B.<span class=\"property\">up</span>:n=-x.<span class=\"property\">arrowScroll</span>;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">down</span>:n=x.<span class=\"property\">arrowScroll</span>;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">spacebar</span>:n=-(n=e.<span class=\"property\">shiftKey</span>?<span class=\"number\">1</span>:-<span class=\"number\">1</span>)*r*<span class=\"number\">.9</span>;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">pageup</span>:n=<span class=\"number\">.9</span>*-r;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">pagedown</span>:n=<span class=\"number\">.9</span>*r;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">home</span>:o==<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>&amp;&amp;<span class=\"variable language_\">document</span>.<span class=\"property\">scrollingElement</span>&amp;&amp;(o=<span class=\"variable language_\">document</span>.<span class=\"property\">scrollingElement</span>),n=-o.<span class=\"property\">scrollTop</span>;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">end</span>:n=<span class=\"number\">0</span>&lt;(r=o.<span class=\"property\">scrollHeight</span>-o.<span class=\"property\">scrollTop</span>-r)?r+<span class=\"number\">10</span>:<span class=\"number\">0</span>;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">left</span>:t=-x.<span class=\"property\">arrowScroll</span>;<span class=\"keyword\">break</span>;<span class=\"keyword\">case</span> B.<span class=\"property\">right</span>:t=x.<span class=\"property\">arrowScroll</span>;<span class=\"keyword\">break</span>;<span class=\"attr\">default</span>:<span class=\"keyword\">return</span>!<span class=\"number\">0</span>&#125;<span class=\"title function_\">l</span>(o,t,n),e.<span class=\"title function_\">preventDefault</span>(),<span class=\"title function_\">c</span>()&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">t</span>(<span class=\"params\">e</span>)&#123;p=e.<span class=\"property\">target</span>&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">c</span>(<span class=\"params\"></span>)&#123;<span class=\"built_in\">clearTimeout</span>(n),n=<span class=\"built_in\">setInterval</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;Y=A=N=&#123;&#125;&#125;,<span class=\"number\">1e3</span>)&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">i</span>(<span class=\"params\">e,t,o</span>)&#123;o=o?<span class=\"attr\">Y</span>:A;<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> n=e.<span class=\"property\">length</span>;n--;)o[<span class=\"title function_\">X</span>(e[n])]=t;<span class=\"keyword\">return</span> t&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">s</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">var</span> t=[],o=<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>,n=M.<span class=\"property\">scrollHeight</span>;<span class=\"keyword\">do</span>&#123;<span class=\"keyword\">var</span> r=A[<span class=\"title function_\">X</span>(e)];<span class=\"keyword\">if</span>(r)<span class=\"keyword\">return</span> <span class=\"title function_\">i</span>(t,r);<span class=\"keyword\">if</span>(t.<span class=\"title function_\">push</span>(e),n===e.<span class=\"property\">scrollHeight</span>)&#123;<span class=\"keyword\">if</span>(r=<span class=\"title function_\">d</span>(M)&amp;&amp;<span class=\"title function_\">d</span>(o)||<span class=\"title function_\">u</span>(M),E&amp;&amp;M.<span class=\"property\">clientHeight</span>+<span class=\"number\">10</span>&lt;M.<span class=\"property\">scrollHeight</span>||!E&amp;&amp;r)<span class=\"keyword\">return</span> <span class=\"title function_\">i</span>(t,<span class=\"title function_\">j</span>())&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(e.<span class=\"property\">clientHeight</span>+<span class=\"number\">10</span>&lt;e.<span class=\"property\">scrollHeight</span>&amp;&amp;<span class=\"title function_\">u</span>(e))<span class=\"keyword\">return</span> <span class=\"title function_\">i</span>(t,e)&#125;<span class=\"keyword\">while</span>(e=e.<span class=\"property\">parentElement</span>)&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">d</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span><span class=\"string\">&quot;hidden&quot;</span>!==<span class=\"title function_\">getComputedStyle</span>(e,<span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">getPropertyValue</span>(<span class=\"string\">&quot;overflow-y&quot;</span>)&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">u</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span><span class=\"string\">&quot;scroll&quot;</span>===(e=<span class=\"title function_\">getComputedStyle</span>(e,<span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">getPropertyValue</span>(<span class=\"string\">&quot;overflow-y&quot;</span>))||<span class=\"string\">&quot;auto&quot;</span>===e&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">m</span>(<span class=\"params\">e,t</span>)&#123;<span class=\"keyword\">return</span> e&amp;&amp;(e.<span class=\"property\">nodeName</span>||<span class=\"string\">&quot;&quot;</span>).<span class=\"title function_\">toLowerCase</span>()===t.<span class=\"title function_\">toLowerCase</span>()&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">w</span>(<span class=\"params\">e,t</span>)&#123;<span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(e/t)==e/t&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">f</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span> <span class=\"title function_\">w</span>(L[<span class=\"number\">0</span>],e)&amp;&amp;<span class=\"title function_\">w</span>(L[<span class=\"number\">1</span>],e)&amp;&amp;<span class=\"title function_\">w</span>(L[<span class=\"number\">2</span>],e)&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">h</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">var</span> t;<span class=\"keyword\">return</span>(e*=x.<span class=\"property\">pulseScale</span>)&lt;<span class=\"number\">1</span>?t=e-(<span class=\"number\">1</span>-<span class=\"title class_\">Math</span>.<span class=\"title function_\">exp</span>(-e)):(t=<span class=\"title class_\">Math</span>.<span class=\"title function_\">exp</span>(-<span class=\"number\">1</span>),t+=(e=<span class=\"number\">1</span>-<span class=\"title class_\">Math</span>.<span class=\"title function_\">exp</span>(-(e-<span class=\"number\">1</span>)))*(<span class=\"number\">1</span>-t)),t*x.<span class=\"property\">pulseNormalize</span>&#125;<span class=\"keyword\">function</span> <span class=\"title function_\">o</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> t <span class=\"keyword\">in</span> e)S.<span class=\"title function_\">hasOwnProperty</span>(t)&amp;&amp;(x[t]=e[t])&#125;<span class=\"keyword\">var</span> p,y,v,b,n,g,S=&#123;<span class=\"attr\">frameRate</span>:<span class=\"number\">150</span>,<span class=\"attr\">animationTime</span>:<span class=\"number\">400</span>,<span class=\"attr\">stepSize</span>:<span class=\"number\">100</span>,<span class=\"attr\">pulseAlgorithm</span>:!<span class=\"number\">0</span>,<span class=\"attr\">pulseScale</span>:<span class=\"number\">4</span>,<span class=\"attr\">pulseNormalize</span>:<span class=\"number\">1</span>,<span class=\"attr\">accelerationDelta</span>:<span class=\"number\">50</span>,<span class=\"attr\">accelerationMax</span>:<span class=\"number\">3</span>,<span class=\"attr\">keyboardSupport</span>:!<span class=\"number\">0</span>,<span class=\"attr\">arrowScroll</span>:<span class=\"number\">50</span>,<span class=\"attr\">fixedBackground</span>:!<span class=\"number\">0</span>,<span class=\"attr\">excluded</span>:<span class=\"string\">&quot;&quot;</span>&#125;,x=S,E=!<span class=\"number\">1</span>,k=&#123;<span class=\"attr\">x</span>:<span class=\"number\">0</span>,<span class=\"attr\">y</span>:<span class=\"number\">0</span>&#125;,D=!<span class=\"number\">1</span>,M=<span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>,L=[],T=<span class=\"regexp\">/^Mac/</span>.<span class=\"title function_\">test</span>(navigator.<span class=\"property\">platform</span>),B=&#123;<span class=\"attr\">left</span>:<span class=\"number\">37</span>,<span class=\"attr\">up</span>:<span class=\"number\">38</span>,<span class=\"attr\">right</span>:<span class=\"number\">39</span>,<span class=\"attr\">down</span>:<span class=\"number\">40</span>,<span class=\"attr\">spacebar</span>:<span class=\"number\">32</span>,<span class=\"attr\">pageup</span>:<span class=\"number\">33</span>,<span class=\"attr\">pagedown</span>:<span class=\"number\">34</span>,<span class=\"attr\">end</span>:<span class=\"number\">35</span>,<span class=\"attr\">home</span>:<span class=\"number\">36</span>&#125;,H=&#123;<span class=\"number\">37</span>:<span class=\"number\">1</span>,<span class=\"number\">38</span>:<span class=\"number\">1</span>,<span class=\"number\">39</span>:<span class=\"number\">1</span>,<span class=\"number\">40</span>:<span class=\"number\">1</span>&#125;,C=[],z=!<span class=\"number\">1</span>,O=<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>(),X=(g=<span class=\"number\">0</span>,<span class=\"keyword\">function</span>(<span class=\"params\">e</span>)&#123;<span class=\"keyword\">return</span> e.<span class=\"property\">uniqueID</span>||(e.<span class=\"property\">uniqueID</span>=g++)&#125;),Y=&#123;&#125;,A=&#123;&#125;,N=&#123;&#125;;<span class=\"keyword\">if</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">localStorage</span>&amp;&amp;<span class=\"variable language_\">localStorage</span>.<span class=\"property\">SS_deltaBuffer</span>)<span class=\"keyword\">try</span>&#123;L=<span class=\"variable language_\">localStorage</span>.<span class=\"property\">SS_deltaBuffer</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&quot;,&quot;</span>)&#125;<span class=\"keyword\">catch</span>(e)&#123;&#125;<span class=\"keyword\">var</span> K,P=<span class=\"variable language_\">window</span>.<span class=\"property\">requestAnimationFrame</span>||<span class=\"variable language_\">window</span>.<span class=\"property\">webkitRequestAnimationFrame</span>||<span class=\"variable language_\">window</span>.<span class=\"property\">mozRequestAnimationFrame</span>||<span class=\"keyword\">function</span>(<span class=\"params\">e,t,o</span>)&#123;<span class=\"variable language_\">window</span>.<span class=\"built_in\">setTimeout</span>(e,o||<span class=\"number\">1e3</span>/<span class=\"number\">60</span>)&#125;,$=<span class=\"variable language_\">window</span>.<span class=\"property\">MutationObserver</span>||<span class=\"variable language_\">window</span>.<span class=\"property\">WebKitMutationObserver</span>||<span class=\"variable language_\">window</span>.<span class=\"property\">MozMutationObserver</span>,j=(K=<span class=\"variable language_\">document</span>.<span class=\"property\">scrollingElement</span>,<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">var</span> e,t;<span class=\"keyword\">return</span> K||((e=<span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;div&quot;</span>)).<span class=\"property\">style</span>.<span class=\"property\">cssText</span>=<span class=\"string\">&quot;height:10000px;width:1px;&quot;</span>,<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(e),t=<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"property\">scrollTop</span>,<span class=\"variable language_\">window</span>.<span class=\"title function_\">scrollBy</span>(<span class=\"number\">0</span>,<span class=\"number\">3</span>),K=<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"property\">scrollTop</span>!=t?<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>:<span class=\"variable language_\">document</span>.<span class=\"property\">documentElement</span>,<span class=\"variable language_\">window</span>.<span class=\"title function_\">scrollBy</span>(<span class=\"number\">0</span>,-<span class=\"number\">3</span>),<span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">removeChild</span>(e)),K&#125;),R=<span class=\"variable language_\">window</span>.<span class=\"property\">navigator</span>.<span class=\"property\">userAgent</span>,_=<span class=\"regexp\">/Edge/</span>.<span class=\"title function_\">test</span>(R),q=<span class=\"regexp\">/chrome/i</span>.<span class=\"title function_\">test</span>(R)&amp;&amp;!_,_=<span class=\"regexp\">/safari/i</span>.<span class=\"title function_\">test</span>(R)&amp;&amp;!_,V=<span class=\"regexp\">/mobile/i</span>.<span class=\"title function_\">test</span>(R),F=<span class=\"regexp\">/Windows NT 6.1/i</span>.<span class=\"title function_\">test</span>(R)&amp;&amp;<span class=\"regexp\">/rv:11/i</span>.<span class=\"title function_\">test</span>(R),I=_&amp;&amp;(<span class=\"regexp\">/Version\\/8/i</span>.<span class=\"title function_\">test</span>(R)||<span class=\"regexp\">/Version\\/9/i</span>.<span class=\"title function_\">test</span>(R)),R=(q||_||F)&amp;&amp;!V,W=!<span class=\"number\">1</span>;<span class=\"keyword\">try</span>&#123;<span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;test&quot;</span>,<span class=\"literal\">null</span>,<span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(&#123;&#125;,<span class=\"string\">&quot;passive&quot;</span>,&#123;<span class=\"attr\">get</span>:<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;W=!<span class=\"number\">0</span>&#125;&#125;))&#125;<span class=\"keyword\">catch</span>(e)&#123;&#125;_=!!W&amp;&amp;&#123;<span class=\"attr\">passive</span>:!<span class=\"number\">1</span>&#125;;<span class=\"keyword\">var</span> U=<span class=\"string\">&quot;onwheel&quot;</span><span class=\"keyword\">in</span> <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;div&quot;</span>)?<span class=\"string\">&quot;wheel&quot;</span>:<span class=\"string\">&quot;mousewheel&quot;</span>;U&amp;&amp;R&amp;&amp;(<span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(U,e,_||!<span class=\"number\">1</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;mousedown&quot;</span>,t,!<span class=\"number\">1</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;load&quot;</span>,r,!<span class=\"number\">1</span>)),o.<span class=\"property\">destroy</span>=<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;y&amp;&amp;y.<span class=\"title function_\">disconnect</span>(),<span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(U,e,!<span class=\"number\">1</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&quot;mousedown&quot;</span>,t,!<span class=\"number\">1</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&quot;keydown&quot;</span>,a,!<span class=\"number\">1</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&quot;resize&quot;</span>,v,!<span class=\"number\">1</span>),<span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&quot;load&quot;</span>,r,!<span class=\"number\">1</span>)&#125;,<span class=\"variable language_\">window</span>.<span class=\"property\">SmoothScrollOptions</span>&amp;&amp;<span class=\"title function_\">o</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">SmoothScrollOptions</span>),<span class=\"string\">&quot;function&quot;</span>==<span class=\"keyword\">typeof</span> define&amp;&amp;define.<span class=\"property\">amd</span>?<span class=\"title function_\">define</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">return</span> o&#125;):<span class=\"string\">&quot;object&quot;</span>==(<span class=\"string\">&quot;undefined&quot;</span>==<span class=\"keyword\">typeof</span> <span class=\"built_in\">exports</span>?<span class=\"string\">&quot;undefined&quot;</span>:<span class=\"title function_\">_typeof</span>(<span class=\"built_in\">exports</span>))?<span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>=<span class=\"attr\">o</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">SmoothScroll</span>=o&#125;();</span><br></pre></td></tr></table></figure></li>\n<li>在<code>[Blogroot]\\_config.xxxxxx.yml</code>引入以下程式碼<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inject:</span><br><span class=\"line\">  head:</span><br><span class=\"line\">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/custom.css&quot;  media=&quot;defer&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;&gt; #教學用樣式</span><br><span class=\"line\">  bottom:</span><br><span class=\"line\"><span class=\"addition\">+   - &lt;script type=&quot;text/javascript&quot; src=&quot;/js/smooth.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"參考來源\"><a href=\"#參考來源\" class=\"headerlink\" title=\"參考來源\"></a>參考來源</h2><ul>\n<li><a href=\"https://juejin.cn/post/6981357659366621197\">頁面絲滑滾動</a></li>\n</ul>\n","text":" 此篇為各筆記之整理，非原創內容，資料來源可見下方連結與文後參考資料 步驟 在 [Blogroot]\\themes\\xxxxxx\\source\\js創建新檔smooth.js 添加以下程式碼1&quot;use strict&quot;;function _typeof(e)&#...","link":"","photos":[],"count_time":{"symbolsCount":"9.9k","symbolsTime":"9 mins."},"categories":[{"name":"Blog","slug":"Blog","count":2,"path":"api/categories/Blog.json"}],"tags":[{"name":"Hexo","slug":"Hexo","count":1,"path":"api/tags/Hexo.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%AD%A5%E9%A9%9F\"><span class=\"toc-text\">步驟</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%83%E8%80%83%E4%BE%86%E6%BA%90\"><span class=\"toc-text\">參考來源</span></a></li></ol>","author":{"name":"Chico","slug":"blog-author","avatar":"https://i.imgur.com/NLlg7nN.png","link":"/","description":"","socials":{"github":"https://github.com/chico890921","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Blog::滑鼠圓球跟隨","uid":"b36af7c752e0f84c8846506465ce6a50","slug":"Blog-滑鼠圓球跟隨","date":"2022-03-14T10:56:17.000Z","updated":"2022-09-20T19:03:25.731Z","comments":true,"path":"api/articles/Blog-滑鼠圓球跟隨.json","keywords":null,"cover":"https://i.imgur.com/WdmJdEm.jpg","text":" 靈感來源 過程下列這個 code 是一開始最先使用的來源123456789101112131415161718192021222324252627&lt;style&gt; .box &#123; width: 30px; height: 30px; border-radius...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"Blog","slug":"Blog","count":2,"path":"api/categories/Blog.json"}],"tags":[],"author":{"name":"Chico","slug":"blog-author","avatar":"https://i.imgur.com/NLlg7nN.png","link":"/","description":"","socials":{"github":"https://github.com/chico890921","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{}}